{"version":3,"sources":["../../src/pages/painel-controle-adm/painel-controle-adm/painel-controle-distribuidor/painel-controle-distribuidor.module.ts","../../src/pages/painel-controle-adm/painel-controle-adm/painel-controle-distribuidor/painel-controle-distribuidor.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAAsD;AACb;AACO;AACgC;AAYhF,IAAa,oCAAoC;IAAjD;IAAmD,CAAC;IAAD,2CAAC;AAAD,CAAC;AAAvC,oCAAoC;IAVhD,+DAAQ,CAAC;QACR,YAAY,EAAE;YACZ,qGAA8B;SAC/B;QACD,OAAO,EAAE;YACP,sEAAe,CAAC,QAAQ,CAAC,qGAA8B,CAAC;YACxD,4EAAe,CAAC,QAAQ,EAAE;SAE3B;KACF,CAAC;GACW,oCAAoC,CAAG;AAAH;;;;;;;;;;;;;;;;;;;;;;ACb4C;AAC5B;AACoB;AAgBrF,IAAa,8BAA8B;IAYzC,wCACS,OAAsB,EACtB,SAAoB,EACpB,gBAAqC,EACrC,SAA0B;QAH1B,YAAO,GAAP,OAAO,CAAe;QACtB,cAAS,GAAT,SAAS,CAAW;QACpB,qBAAgB,GAAhB,gBAAgB,CAAqB;QACrC,cAAS,GAAT,SAAS,CAAiB;QAVnC,sBAAiB,GAAG,IAAI,MAAM,CAAC,IAAI,CAAC,iBAAiB,CAAC;QACtD,sBAAiB,GAAG,IAAI,MAAM,CAAC,IAAI,CAAC,kBAAkB,CAAC;QAEvD,qBAAgB,GAAmB,IAAI,CAAC;QACxC,4BAAuB,GAAmB,IAAI,CAAC;QAC/C,WAAM,GAAG,QAAQ,CAAC;QAOhB,IAAI,CAAC,OAAO,EAAE,CAAC;IACjB,CAAC;IAED,gDAAO,GAAP;QAAA,iBAMC;QALC,IAAI,CAAC,gBAAgB,CAAC,cAAc,CAAC,SAAS,CAAC,UAAC,cAA8B;YAC5E,KAAI,CAAC,gBAAgB,GAAG,cAAc,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,UAAU,EAAZ,CAAY,CAAC,CAAC;YACjE,KAAI,CAAC,uBAAuB,GAAG,cAAc,CAAC,MAAM,CAAC,WAAC,IAAI,QAAC,CAAC,CAAC,UAAU,EAAb,CAAa,CAAC,CAAC;QAC3E,CAAC,CAAC;IAEJ,CAAC;IAED,6DAAoB,GAApB,UAAqB,YAA0B;QAC7C,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,sCAAsC,EAAE,EAAE,YAAY,EAAE,YAAY,EAAE,CAAC,CAAC;IAC5F,CAAC;IAED,uDAAc,GAAd;QACE,IAAI,CAAC,OAAO,EAAE,CAAC;IACjB,CAAC;IAED,gDAAO,GAAP;QAAA,iBAoEC;QAnEC,UAAU,CAAC;YACT,IAAI,UAAU,GAAgB,QAAQ,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC;YAE7D,EAAE,CAAC,CAAC,KAAI,CAAC,UAAU,CAAC,CAAC,CAAC;gBAEpB,KAAI,CAAC,GAAG,GAAG,IAAI,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,KAAI,CAAC,UAAU,CAAC,aAAa,EAAE;oBAC5D,IAAI,EAAE,CAAC;oBACP,MAAM,EAAE,EAAE,GAAG,EAAE,CAAC,SAAS,EAAE,GAAG,EAAE,CAAC,SAAS,EAAE;iBAC7C,CAAC,CAAC;gBACH,EAAE,CAAC,CAAC,KAAI,CAAC,gBAAgB,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;oBACrC,KAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,UAAC,YAA0B;wBAEvD,IAAI,UAAU,GAAG,IAAI,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC;4BAC1C,OAAO,EAAE,mEACc,YAAY,CAAC,QAAQ,oEACJ,YAAY,CAAC,SAAS,2CAC7C;yBAClB,CAAC,CAAC;wBACH,IAAI,MAAM,GAAG,IAAI,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC;4BAClC,GAAG,EAAE,KAAI,CAAC,GAAG;4BACb,QAAQ,EAAE;gCACR,GAAG,EAAE,YAAY,CAAC,aAAa,CAAC,QAAQ;gCACxC,GAAG,EAAE,YAAY,CAAC,aAAa,CAAC,SAAS;6BAC1C;4BACD,KAAK,EAAE,YAAY,CAAC,SAAS;4BAC7B,IAAI,EAAE,wDAAwD;yBAC/D,CAAC,CAAC;wBAEH,MAAM,CAAC,WAAW,CAAC,OAAO,EAAE;4BAC1B,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;4BACrB,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;4BAChC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,MAAM,CAAC,CAAC;wBACpC,CAAC,CAAC,CAAC;oBAEL,CAAC,CAAC;gBACJ,CAAC;gBACD,EAAE,CAAC,CAAC,KAAI,CAAC,uBAAuB,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;oBAC5C,KAAI,CAAC,uBAAuB,CAAC,OAAO,CAAC,UAAC,YAA0B;wBAE9D,IAAI,UAAU,GAAG,IAAI,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC;4BAC1C,OAAO,EAAE,yDACI,YAAY,CAAC,QAAQ,0DACJ,YAAY,CAAC,SAAS,iCAC7C;yBACR,CAAC,CAAC;wBACH,IAAI,MAAM,GAAG,IAAI,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC;4BAClC,GAAG,EAAE,KAAI,CAAC,GAAG;4BACb,QAAQ,EAAE;gCACR,GAAG,EAAE,YAAY,CAAC,aAAa,CAAC,QAAQ;gCACxC,GAAG,EAAE,YAAY,CAAC,aAAa,CAAC,SAAS;6BAC1C;4BACD,KAAK,EAAE,YAAY,CAAC,SAAS;4BAC7B,IAAI,EAAE,sDAAsD;yBAC7D,CAAC,CAAC;wBAEH,MAAM,CAAC,WAAW,CAAC,OAAO,EAAE;4BAC1B,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;4BACrB,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;4BAChC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,MAAM,CAAC,CAAC;wBACpC,CAAC,CAAC,CAAC;oBAEL,CAAC,CAAC;gBACJ,CAAC;gBACD,KAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC,KAAI,CAAC,GAAG,CAAC,CAAC;YAC1C,CAAC;QACH,CAAC,EAAE,GAAG,CAAC;IAET,CAAC;IAED,iEAAwB,GAAxB;QAAA,iBAYC;QAXC,IAAI,CAAC,iBAAiB,CAAC,KAAK,CAAC;YAC3B,MAAM,EAAE,IAAI,CAAC,KAAK;YAClB,WAAW,EAAE,IAAI,CAAC,GAAG;YACrB,UAAU,EAAE,SAAS;SACtB,EAAE,UAAC,QAAQ,EAAE,MAAM;YAClB,EAAE,CAAC,CAAC,MAAM,KAAK,IAAI,CAAC,CAAC,CAAC;gBACpB,KAAI,CAAC,iBAAiB,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;YACjD,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,MAAM,CAAC,KAAK,CAAC,mCAAmC,GAAG,MAAM,CAAC,CAAC;YAC7D,CAAC;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IAEH,qCAAC;AAAD,CAAC;AAvHmB;IAAjB,gEAAS,CAAC,KAAK,CAAC;8BAAa,yDAAU;kEAAC;AAF9B,8BAA8B;IAL1C,wEAAS,EAAE;IACX,gEAAS,CAAC;QACT,QAAQ,EAAE,mCAAmC;OACG;KACjD,CAAC;yEAc+B;QACX,sGAAS;QACF,wEAAmB;QAC1B,eAAe;AAyGpC;SAzHY,8BAA8B,iB","file":"29.js","sourcesContent":["import { TranslateModule } from '@ngx-translate/core';\nimport { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { PainelControleDistribuidorPage } from './painel-controle-distribuidor';\n\n@NgModule({\n  declarations: [\n    PainelControleDistribuidorPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(PainelControleDistribuidorPage),\n    TranslateModule.forChild(),    \n    \n  ],\n})\nexport class PainelControleDistribuidorPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/painel-controle-adm/painel-controle-adm/painel-controle-distribuidor/painel-controle-distribuidor.module.ts","import { FirebaseListObservable } from 'angularfire2/database';\nimport { Distribuidor } from './../../../../providers/database/models/distribuidor';\nimport { DistribuidorService } from './../../../../providers/database/services/distribuidor';\nimport { Component, ViewChild, ElementRef } from '@angular/core';\nimport { IonicPage, NavController, NavParams, ModalController } from 'ionic-angular';\n\ndeclare var google;\n\ninterface Marker {\n  lat: number;\n  lng: number;\n  label?: string;\n  draggable: boolean;\n}\n\n@IonicPage()\n@Component({\n  selector: 'page-painel-controle-distribuidor',\n  templateUrl: 'painel-controle-distribuidor.html',\n})\nexport class PainelControleDistribuidorPage {\n\n  @ViewChild('map') mapElement: ElementRef;\n  map: any;\n  start;\n  end;\n  directionsService = new google.maps.DirectionsService;\n  directionsDisplay = new google.maps.DirectionsRenderer;\n\n  distribuidoresOk: Distribuidor[] = null;\n  distribuidoresPendentes: Distribuidor[] = null;\n  config = 'ativas';\n  constructor(\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    public distribuidorSrvc: DistribuidorService,\n    public modalCtrl: ModalController,\n  ) {\n    this.refresh();\n  }\n\n  refresh() {\n    this.distribuidorSrvc.distribuidores.subscribe((distribuidores: Distribuidor[]) => {\n      this.distribuidoresOk = distribuidores.filter(x => x.dist_ativo);\n      this.distribuidoresPendentes = distribuidores.filter(x => !x.dist_ativo);\n    })\n\n  }\n\n  congurarDistribuidor(distribuidor: Distribuidor) {\n    this.navCtrl.push('PainelControleDistribuidorConfigPage', { distribuidor: distribuidor });\n  }\n\n  ionViewDidLoad() {\n    this.initMap();\n  }\n\n  initMap() {\n    setTimeout(() => {\n      let mapElement: HTMLElement = document.getElementById('map');\n\n      if (this.mapElement) {\n\n        this.map = new google.maps.Map(this.mapElement.nativeElement, {\n          zoom: 4,\n          center: { lat: -15.793889, lng: -57.882778 },\n        });\n        if (this.distribuidoresOk.length > 0) {\n          this.distribuidoresOk.forEach((distribuidor: Distribuidor) => {\n\n            var infowindow = new google.maps.InfoWindow({\n              content: `<div class=\"img-mapa\">\n                        <img  src=\"${distribuidor.dist_img}\"/>\n                        <div class=\"img-mapa-title\">${distribuidor.dist_nome}</div>\n                        </div>`\n            });\n            let marker = new google.maps.Marker({\n              map: this.map,\n              position: {\n                lat: distribuidor.dist_endereco.latitude,\n                lng: distribuidor.dist_endereco.longitude\n              },\n              title: distribuidor.dist_nome,\n              icon: 'http://maps.google.com/mapfiles/ms/icons/green-dot.png'\n            });\n\n            marker.addListener('click', function () {\n              this.map.setZoom(17);\n              this.map.panTo(marker.position);\n              infowindow.open(this.map, marker);\n            });\n\n          })\n        }\n        if (this.distribuidoresPendentes.length > 0) {\n          this.distribuidoresPendentes.forEach((distribuidor: Distribuidor) => {\n\n            var infowindow = new google.maps.InfoWindow({\n              content: `<div class=\"img-mapa\">\n              <img  src=\"${distribuidor.dist_img}\"/>\n              <div class=\"img-mapa-title\">${distribuidor.dist_nome}</div>\n              </div>`\n            });\n            let marker = new google.maps.Marker({\n              map: this.map,\n              position: {\n                lat: distribuidor.dist_endereco.latitude,\n                lng: distribuidor.dist_endereco.longitude\n              },\n              title: distribuidor.dist_nome,\n              icon: 'http://maps.google.com/mapfiles/ms/icons/red-dot.png'\n            });\n\n            marker.addListener('click', function () {\n              this.map.setZoom(17);\n              this.map.panTo(marker.position);\n              infowindow.open(this.map, marker);\n            });\n\n          })\n        }\n        this.directionsDisplay.setMap(this.map);\n      }\n    }, 100)\n\n  }\n\n  calculateAndDisplayRoute() {\n    this.directionsService.route({\n      origin: this.start,\n      destination: this.end,\n      travelMode: 'DRIVING'\n    }, (response, status) => {\n      if (status === 'OK') {\n        this.directionsDisplay.setDirections(response);\n      } else {\n        window.alert('Directions request failed due to ' + status);\n      }\n    });\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/painel-controle-adm/painel-controle-adm/painel-controle-distribuidor/painel-controle-distribuidor.ts"],"sourceRoot":""}