{"version":3,"sources":["../../src/pages/painel-controle-adm/painel-controle-adm/painel-controle-distribuidor/painel-controle-distribuidor.module.ts","../../src/pages/painel-controle-adm/painel-controle-adm/painel-controle-distribuidor/painel-controle-distribuidor.ts"],"names":[],"mappings":"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","file":"29.js","sourcesContent":["import { TranslateModule } from '@ngx-translate/core';\r\nimport { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { PainelControleDistribuidorPage } from './painel-controle-distribuidor';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    PainelControleDistribuidorPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(PainelControleDistribuidorPage),\r\n    TranslateModule.forChild(),    \r\n    \r\n  ],\r\n})\r\nexport class PainelControleDistribuidorPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/painel-controle-adm/painel-controle-adm/painel-controle-distribuidor/painel-controle-distribuidor.module.ts","import { FirebaseListObservable } from 'angularfire2/database';\r\nimport { Distribuidor } from './../../../../providers/database/models/distribuidor';\r\nimport { DistribuidorService } from './../../../../providers/database/services/distribuidor';\r\nimport { Component, ViewChild, ElementRef } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams, ModalController } from 'ionic-angular';\r\n\r\ndeclare var google;\r\n\r\ninterface Marker {\r\n  lat: number;\r\n  lng: number;\r\n  label?: string;\r\n  draggable: boolean;\r\n}\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-painel-controle-distribuidor',\r\n  templateUrl: 'painel-controle-distribuidor.html',\r\n})\r\nexport class PainelControleDistribuidorPage {\r\n\r\n  @ViewChild('map') mapElement: ElementRef;\r\n  map: any;\r\n  start;\r\n  end;\r\n  directionsService = new google.maps.DirectionsService;\r\n  directionsDisplay = new google.maps.DirectionsRenderer;\r\n\r\n  distribuidoresOk: Distribuidor[] = null;\r\n  distribuidoresPendentes: Distribuidor[] = null;\r\n  config = 'ativas';\r\n  constructor(\r\n    public navCtrl: NavController,\r\n    public navParams: NavParams,\r\n    public distribuidorSrvc: DistribuidorService,\r\n    public modalCtrl: ModalController,\r\n  ) {\r\n    this.refresh();\r\n  }\r\n\r\n  refresh() {\r\n    this.distribuidorSrvc.distribuidores.subscribe((distribuidores: Distribuidor[]) => {\r\n      this.distribuidoresOk = distribuidores.filter(x => x.dist_ativo);\r\n      this.distribuidoresPendentes = distribuidores.filter(x => !x.dist_ativo);\r\n    })\r\n\r\n  }\r\n\r\n  congurarDistribuidor(distribuidor: Distribuidor) {\r\n    this.navCtrl.push('PainelControleDistribuidorConfigPage', { distribuidor: distribuidor });\r\n  }\r\n\r\n  ionViewDidLoad() {\r\n    this.initMap();\r\n  }\r\n\r\n  initMap() {\r\n    setTimeout(() => {\r\n      let mapElement: HTMLElement = document.getElementById('map');\r\n\r\n      if (this.mapElement) {\r\n\r\n        this.map = new google.maps.Map(this.mapElement.nativeElement, {\r\n          zoom: 4,\r\n          center: { lat: -15.793889, lng: -57.882778 },\r\n        });\r\n        if (this.distribuidoresOk.length > 0) {\r\n          this.distribuidoresOk.forEach((distribuidor: Distribuidor) => {\r\n\r\n            var infowindow = new google.maps.InfoWindow({\r\n              content: `<div class=\"img-mapa\">\r\n                        <img  src=\"${distribuidor.dist_img}\"/>\r\n                        <div class=\"img-mapa-title\">${distribuidor.dist_nome}</div>\r\n                        </div>`\r\n            });\r\n            let marker = new google.maps.Marker({\r\n              map: this.map,\r\n              position: {\r\n                lat: distribuidor.dist_endereco.latitude,\r\n                lng: distribuidor.dist_endereco.longitude\r\n              },\r\n              title: distribuidor.dist_nome,\r\n              icon: 'http://maps.google.com/mapfiles/ms/icons/green-dot.png'\r\n            });\r\n\r\n            marker.addListener('click', function () {\r\n              this.map.setZoom(17);\r\n              this.map.panTo(marker.position);\r\n              infowindow.open(this.map, marker);\r\n            });\r\n\r\n          })\r\n        }\r\n        if (this.distribuidoresPendentes.length > 0) {\r\n          this.distribuidoresPendentes.forEach((distribuidor: Distribuidor) => {\r\n\r\n            var infowindow = new google.maps.InfoWindow({\r\n              content: `<div class=\"img-mapa\">\r\n              <img  src=\"${distribuidor.dist_img}\"/>\r\n              <div class=\"img-mapa-title\">${distribuidor.dist_nome}</div>\r\n              </div>`\r\n            });\r\n            let marker = new google.maps.Marker({\r\n              map: this.map,\r\n              position: {\r\n                lat: distribuidor.dist_endereco.latitude,\r\n                lng: distribuidor.dist_endereco.longitude\r\n              },\r\n              title: distribuidor.dist_nome,\r\n              icon: 'http://maps.google.com/mapfiles/ms/icons/red-dot.png'\r\n            });\r\n\r\n            marker.addListener('click', function () {\r\n              this.map.setZoom(17);\r\n              this.map.panTo(marker.position);\r\n              infowindow.open(this.map, marker);\r\n            });\r\n\r\n          })\r\n        }\r\n        this.directionsDisplay.setMap(this.map);\r\n      }\r\n    }, 100)\r\n\r\n  }\r\n\r\n  calculateAndDisplayRoute() {\r\n    this.directionsService.route({\r\n      origin: this.start,\r\n      destination: this.end,\r\n      travelMode: 'DRIVING'\r\n    }, (response, status) => {\r\n      if (status === 'OK') {\r\n        this.directionsDisplay.setDirections(response);\r\n      } else {\r\n        window.alert('Directions request failed due to ' + status);\r\n      }\r\n    });\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/painel-controle-adm/painel-controle-adm/painel-controle-distribuidor/painel-controle-distribuidor.ts"],"sourceRoot":""}