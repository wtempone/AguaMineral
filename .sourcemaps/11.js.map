{"version":3,"sources":["../../src/pages/painel-pedidos/pedido-list-produtos/adicionar-produto-carrinho/adicionar-produto-carrinho.module.ts","../../src/pages/painel-pedidos/pedido-list-produtos/adicionar-produto-carrinho/adicionar-produto-carrinho.ts"],"names":[],"mappings":"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","file":"11.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { AdicionarProdutoCarrinhoPage } from './adicionar-produto-carrinho';\nimport { ComponentsModule } from '../../../../components/components.module';\n\n@NgModule({\n  declarations: [\n    AdicionarProdutoCarrinhoPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(AdicionarProdutoCarrinhoPage),\n    ComponentsModule,    \n  ],\n})\nexport class AdicionarProdutoCarrinhoPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/painel-pedidos/pedido-list-produtos/adicionar-produto-carrinho/adicionar-produto-carrinho.module.ts","import { Distribuidor } from './../../../../providers/database/models/distribuidor';\nimport { Pedido } from './../../../../providers/database/models/pedido';\nimport { UsuarioService } from './../../../../providers/database/services/usuario';\nimport { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, ToastController, AlertController } from 'ionic-angular';\nimport { DistribuidorProduto } from '../../../../providers/database/models/distribuidor-produto';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\n\n@IonicPage()\n@Component({\n  selector: 'page-adicionar-produto-carrinho',\n  templateUrl: 'adicionar-produto-carrinho.html',\n})\nexport class AdicionarProdutoCarrinhoPage {\n  marca: any;\n  distribuidorProduto: DistribuidorProduto;\n  distribuidor: Distribuidor;\n\n  formulario: FormGroup;\n  constructor(\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    //public pedidosSrvc: PedidosService,\n    private formBuilder: FormBuilder,\n    private toastCtrl: ToastController,\n    private alertCtrl: AlertController,\n    private usuarioSrvc: UsuarioService\n  ) {\n    if (this.navParams.data.distribuidorProduto)\n      this.distribuidorProduto = this.navParams.data.distribuidorProduto;\n\n    else\n      this.distribuidorProduto = <DistribuidorProduto>{\n        dist_produto: null,\n        dist_preco: 10.55,\n        dist_categoria: null,\n        dist_quantidade: null,\n        dist_total: null,\n        dist_observacao: null,\n        produto: null,\n        categoria: null,\n      }\n\n  }\n  ngOnInit() {\n    this.formulario = this.formBuilder.group({\n      dist_produto: [null],\n      dist_preco: [null],\n      dist_categoria: [null],\n      dist_quantidade: [null],\n      dist_total: [null],\n      dist_observacao: [null],\n      produto: [null],\n      categoria: [null],\n    });\n\n    this.formulario.patchValue({\n      dist_produto: this.distribuidorProduto.dist_produto,\n      dist_preco: this.distribuidorProduto.dist_preco,\n      dist_categoria: this.distribuidorProduto.dist_categoria,\n      dist_quantidade: (this.distribuidorProduto.dist_quantidade ? this.distribuidorProduto.dist_quantidade : 1),\n      dist_total: this.distribuidorProduto.dist_preco * (this.distribuidorProduto.dist_quantidade ? this.distribuidorProduto.dist_quantidade : 1),\n      dist_observacao: this.distribuidorProduto.dist_observacao,\n      produto: this.distribuidorProduto.produto,\n      categoria: this.distribuidorProduto.categoria,\n    });\n  }\n\n  verificaValidTouched(campo: string) {\n    this.formulario.get(campo).errors;\n    return (\n      !this.formulario.get(campo).valid &&\n      (this.formulario.get(campo).touched || this.formulario.get(campo).dirty)\n    );\n  }\n\n  verificaValidacoesForm(formGroup: FormGroup) {\n    console.log(formGroup);\n    Object.keys(formGroup.controls).forEach(campo => {\n      const controle = formGroup.get(campo);\n      controle.markAsDirty();\n      if (controle instanceof FormGroup) {\n        this.verificaValidacoesForm(controle);\n      }\n    });\n  }\n\n  adicionarProduto() {\n    let carrinho: Pedido;\n    if (this.usuarioSrvc.usuarioAtual.usr_carrinho) {\n      carrinho = this.usuarioSrvc.usuarioAtual.usr_carrinho;\n    } else {\n      carrinho.distribuidor = <Distribuidor> {\n        dist_nome: this.distribuidor.dist_nome,\n        dist_img: this.distribuidor.dist_img,\n        dist_cnpj: this.distribuidor.dist_cnpj,\n        dist_email: this.distribuidor.dist_email,\n        dist_celular: this.distribuidor.dist_celular,\n        dist_endereco: this.distribuidor.dist_endereco,\n        dist_telefone: this.distribuidor.dist_telefone\n      };\n    }\n    if (!carrinho.produtos){\n      carrinho.produtos = [];\n    }\n    this.distribuidorProduto.dist_total = this.distribuidorProduto.dist_preco * this.distribuidorProduto.dist_quantidade;\n\n    if (carrinho.produtos.filter(x => x.$key == this.distribuidorProduto.$key).length == 0) {\n      carrinho.produtos.filter(x => x.$key == this.distribuidorProduto.$key)[0].dist_quantidade = this.distribuidorProduto.dist_quantidade;\n      carrinho.produtos.filter(x => x.$key == this.distribuidorProduto.$key)[0].dist_total = this.distribuidorProduto.dist_total;\n    } else {\n      carrinho.produtos.push(this.distribuidorProduto);\n    }\n\n    this.usuarioSrvc.updateCarrinho(carrinho);\n    \n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/painel-pedidos/pedido-list-produtos/adicionar-produto-carrinho/adicionar-produto-carrinho.ts"],"sourceRoot":""}